<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Lighting # La iluminación en gráficos por computadora se refiere a la colocación de luces en una escena para lograr algún efecto deseado. Los paquetes de síntesis de imágenes y animación contienen diferentes tipos de luces que se pueden colocar en diferentes lugares y modificar cambiando los parámetros. Con demasiada frecuencia, las personas que crean imágenes o animaciones ignoran o ponen poco énfasis en la iluminación. [2]
En gráficos por computadora, el efecto general de una fuente de luz sobre un objeto está determinado por la combinación de las interacciones del objeto con él, generalmente descritas por al menos tres componentes principales."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Lighting"><meta property="og:description" content="Lighting # La iluminación en gráficos por computadora se refiere a la colocación de luces en una escena para lograr algún efecto deseado. Los paquetes de síntesis de imágenes y animación contienen diferentes tipos de luces que se pueden colocar en diferentes lugares y modificar cambiando los parámetros. Con demasiada frecuencia, las personas que crean imágenes o animaciones ignoran o ponen poco énfasis en la iluminación. [2]
En gráficos por computadora, el efecto general de una fuente de luz sobre un objeto está determinado por la combinación de las interacciones del objeto con él, generalmente descritas por al menos tres componentes principales."><meta property="og:type" content="article"><meta property="og:url" content="https://anfbalceroce.github.io/VisualComputing/docs/shaders/lighting/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-11-28T04:11:08-05:00"><title>Lighting | Visual Computing 2022-2</title><link rel=manifest href=/VisualComputing/manifest.json><link rel=icon href=/VisualComputing/favicon.png type=image/x-icon><link rel=stylesheet href=/VisualComputing/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/VisualComputing/flexsearch.min.js></script>
<script defer src=/VisualComputing/en.search.min.8566848f1696c79781172de15c2343efd3b4c68507b5ca00be20a953984ece41.js integrity="sha256-hWaEjxaWx5eBFy3hXCND79O0xoUHtcoAviCpU5hOzkE=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/VisualComputing/><span>Visual Computing 2022-2</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Taller 1</span><ul><li><a href=/VisualComputing/docs/taller-1/ilusiones/>Ilusiones</a></li><li><a href=/VisualComputing/docs/taller-1/convolucion/>Convolución</a></li></ul></li><li class=book-section-flat><span>Taller 2</span><ul><li><a href=/VisualComputing/docs/taller-2/camaras/>Múltiples Cámaras</a></li><li><a href=/VisualComputing/docs/taller-2/W2_Optional/>Ejercicio Opcional</a></li></ul></li><li class=book-section-flat><span>Shaders</span><ul><li><a href=/VisualComputing/docs/shaders/coloring/>Coloring</a></li><li><a href=/VisualComputing/docs/shaders/texturing/>Texturing</a></li><li><a href=/VisualComputing/docs/shaders/ImageProcessing/>Image Processing</a></li><li><a href=/VisualComputing/docs/shaders/ProceduralTexturing/>Procedural Texturing</a></li><li><a href=/VisualComputing/docs/shaders/non-euclidean_geometry/>Non-Euclidean geometry</a></li><li><a href=/VisualComputing/docs/shaders/SpatialCoherence/>Spatial Coherence</a></li><li><a href=/VisualComputing/docs/shaders/photomosaic/>Photomosaic</a></li><li><a href=/VisualComputing/docs/shaders/lighting/ class=active>Lighting</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/VisualComputing/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Lighting</strong>
<label for=toc-control><img src=/VisualComputing/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#lighting>Lighting</a><ul><li><a href=#luz-ambiental>Luz ambiental</a></li></ul></li><li><a href=#ejercicio>Ejercicio</a><ul><li><a href=#reflexion-especular>Reflexion especular</a></li></ul></li><li><a href=#ejercicio-1>Ejercicio</a><ul><li><a href=#reflexión-difusa>Reflexión difusa</a></li></ul></li><li><a href=#ejercicio-2>Ejercicio</a></li><li><a href=#ejercicio-3>Ejercicio</a><ul><li><a href=#referencias>Referencias</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=lighting>Lighting
<a class=anchor href=#lighting>#</a></h1><p>La iluminación en gráficos por computadora se refiere a la colocación de luces en una escena para lograr algún efecto deseado. Los paquetes de síntesis de imágenes y animación contienen diferentes tipos de luces que se pueden colocar en diferentes lugares y modificar cambiando los parámetros. Con demasiada frecuencia, las personas que crean imágenes o animaciones ignoran o ponen poco énfasis en la iluminación. [2]</p><p>En gráficos por computadora, el efecto general de una fuente de luz sobre un objeto está determinado por la combinación de las interacciones del objeto con él, generalmente descritas por al menos tres componentes principales. Los tres componentes principales de iluminación (y los tipos de interacción subsiguientes) son difusos, ambientales y especulares. [3]</p><h2 id=luz-ambiental>Luz ambiental
<a class=anchor href=#luz-ambiental>#</a></h2><p>Una luz ambiental proyecta suaves rayos de luz en todas las direcciones. No tienen una direccionalidad específica, por lo que no proyectan sombras y simula más una luz secundaria que proviene de todos los ángulos diferentes del objeto. La iluminación ambiental es una buena alternativa para rellenar áreas en un render que no tiene suficiente iluminación. [2]</p><blockquote><h1 id=ejercicio>Ejercicio
<a class=anchor href=#ejercicio>#</a></h1><p>Implemente una escena que haga uso de la siguiente ecuación de ilumincación donde ambient4 es el color de la luz ambiental.
<iframe id=sketch style=width:550px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
            
            
            
            <script src=/VisualComputing/sketches/Lighting_1/sketch.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></p></blockquote><details><summary>Código</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>easycam</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>models</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambient</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambientSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>modelsSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorPicker</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#34;ambient.frag&#34;</span>, {<span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>NONE</span>,});
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>500</span>, <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noLights</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorMode</span>(<span style=color:#a6e22e>RGB</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setAttributes</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>0.250</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.150</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.500</span>, <span style=color:#ae81ff>0.700</span>],
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>state</span>, <span style=color:#ae81ff>2000</span>); 
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>oncontextmenu</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>trange</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>models</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> ,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>()),
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span>, <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>), <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.5</span>, <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>350</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;ambient&#34;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>());});  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#e6db74>&#34;#FFFFFF&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>color</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightColor&#34;</span>, [<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    ]);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;ambient&#34;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightColor&#34;</span>, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#34;blue&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>value</span>(); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> <span style=color:#a6e22e>box</span>(<span style=color:#a6e22e>radius</span>)
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> <span style=color:#a6e22e>sphere</span>(<span style=color:#a6e22e>radius</span>)
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> <span style=color:#a6e22e>torus</span>(<span style=color:#a6e22e>radius</span>, <span style=color:#a6e22e>radius</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Shader</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// emitted by p5 color-group commands</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// https://p5js.org/reference/#group-Color</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> uMaterialColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> lightColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> ambient;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> ambient4 <span style=color:#f92672>=</span> lightColor <span style=color:#f92672>*</span> ambient;
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> ambient4 <span style=color:#f92672>*</span> uMaterialColor;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h2 id=reflexion-especular>Reflexion especular
<a class=anchor href=#reflexion-especular>#</a></h2><p>Se refiere a los reflejos de los objetos reflectantes, como diamantes, bolas de billar y ojos. Los reflejos especulares a menudo aparecen como puntos brillantes en una superficie, en un punto donde la fuente de luz incide directamente. Ambient, Diffuse y Specular se denominan los tres componentes de una fuente de luz. [3]</p><p>Una reflexión especular es visible solo donde la superficie normal está orientada precisamente a la mitad entre la dirección de la luz entrante y la dirección del espectador; esto se llama la dirección del medio ángulo porque biseca (divide en dos) el ángulo entre la luz entrante y el espectador. Por lo tanto, una superficie reflectora especular mostraría un punto culminante especular como la imagen reflejada perfectamente nítida de una fuente de luz. Sin embargo, muchos objetos brillantes muestran reflejos especulares borrosos.[4]</p><blockquote><h1 id=ejercicio-1>Ejercicio
<a class=anchor href=#ejercicio-1>#</a></h1><p>Implementar una escena de sombreado de dibujos animados o Toon Shader apartir de la reflexion especular</p></blockquote><iframe id=sketch style=width:550px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
            
            
            
            <script src=/VisualComputing/sketches/Lighting_2/sketch.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Código</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>toonShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>models</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambient</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambientSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>modelsSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorPicker</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toonShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadShader</span>(<span style=color:#e6db74>&#39;vert.frag&#39;</span>, <span style=color:#e6db74>&#39;frag.frag&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>500</span>, <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noLights</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorMode</span>(<span style=color:#a6e22e>RGB</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setAttributes</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>0.250</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.150</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.500</span>, <span style=color:#ae81ff>0.700</span>],
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>state</span>, <span style=color:#ae81ff>2000</span>); 
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>oncontextmenu</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>trange</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>90</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>models</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> ,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>()),
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span>, <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>), <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.5</span>, <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>350</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toonShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;fraction&#34;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>());});  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#e6db74>&#34;#FFFFFF&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>color</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toonShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightColor&#34;</span>, [<span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,<span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    ]);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>toonShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toonShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;fraction&#39;</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toonShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;ambient&#34;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>toonShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightColor&#34;</span>, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#34;blue&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>toonShader</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dirY</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>mouseY</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>dirX</span> <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>(<span style=color:#a6e22e>mouseX</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>width</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>0.5</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>directionalLight</span>(<span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>255</span>, <span style=color:#ae81ff>204</span>, <span style=color:#a6e22e>dirX</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>dirY</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>value</span>(); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> <span style=color:#a6e22e>box</span>(<span style=color:#a6e22e>radius</span>)
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>?</span> <span style=color:#a6e22e>sphere</span>(<span style=color:#a6e22e>radius</span>)
</span></span><span style=display:flex><span>      <span style=color:#f92672>:</span> <span style=color:#a6e22e>torus</span>(<span style=color:#a6e22e>radius</span>, <span style=color:#a6e22e>radius</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Shader-frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#66d9ef>attribute</span> <span style=color:#66d9ef>vec3</span> aPosition;
</span></span><span style=display:flex><span><span style=color:#66d9ef>attribute</span> <span style=color:#66d9ef>vec3</span> aNormal;
</span></span><span style=display:flex><span><span style=color:#66d9ef>attribute</span> <span style=color:#66d9ef>vec2</span> aTexCoord;
</span></span><span style=display:flex><span><span style=color:#66d9ef>attribute</span> <span style=color:#66d9ef>vec4</span> aVertexColor;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> mat4 uModelViewMatrix;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> mat4 uProjectionMatrix;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> mat3 uNormalMatrix;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>int</span> uDirectionalLightCount;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec3</span> uLightingDirection;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec3</span> uDirectionalColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> uMaterialColor;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec4</span> vertColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec3</span> vertLightDir;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec3</span> vertNormal;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec2</span> vertTexCoord;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> positionVec4 <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(aPosition, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  gl_Position <span style=color:#f92672>=</span> uProjectionMatrix <span style=color:#f92672>*</span> uModelViewMatrix <span style=color:#f92672>*</span> positionVec4;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vertNormal <span style=color:#f92672>=</span> normalize(uNormalMatrix <span style=color:#f92672>*</span> aNormal);
</span></span><span style=display:flex><span>  vertLightDir <span style=color:#f92672>=</span> <span style=color:#f92672>-</span>uLightingDirection;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  vertColor <span style=color:#f92672>=</span> uMaterialColor;
</span></span><span style=display:flex><span>  vertTexCoord <span style=color:#f92672>=</span> aTexCoord;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Shader-vert</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#75715e>#ifdef GL_ES</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>int</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>#endif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> fraction;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> lightColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> ambient;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec4</span> vertColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec3</span> vertNormal;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec3</span> vertLightDir;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>highp</span> <span style=color:#66d9ef>vec2</span> vertTexCoord;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> intensity;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> color;
</span></span><span style=display:flex><span>  intensity <span style=color:#f92672>=</span> max(<span style=color:#ae81ff>0.0</span>, dot(vertLightDir, vertNormal));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (intensity <span style=color:#f92672>&gt;</span> pow(<span style=color:#ae81ff>0.95</span>, fraction)) {
</span></span><span style=display:flex><span>    color <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(<span style=color:#66d9ef>vec3</span>(<span style=color:#ae81ff>1.0</span>), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (intensity <span style=color:#f92672>&gt;</span> pow(<span style=color:#ae81ff>0.5</span>, fraction)) {
</span></span><span style=display:flex><span>    color <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(<span style=color:#66d9ef>vec3</span>(<span style=color:#ae81ff>0.6</span>), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (intensity <span style=color:#f92672>&gt;</span> pow(<span style=color:#ae81ff>0.25</span>, fraction)) {
</span></span><span style=display:flex><span>    color <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(<span style=color:#66d9ef>vec3</span>(<span style=color:#ae81ff>0.4</span>), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    color <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(<span style=color:#66d9ef>vec3</span>(<span style=color:#ae81ff>0.2</span>), <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> color <span style=color:#f92672>*</span> vertColor <span style=color:#f92672>*</span> lightColor;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h2 id=reflexión-difusa>Reflexión difusa
<a class=anchor href=#reflexi%c3%b3n-difusa>#</a></h2><p>La iluminación difusa (o reflexión difusa) es la iluminación directa de un objeto por una cantidad uniforme de luz que interactúa con una superficie que dispersa la luz.Después de que la luz incide en un objeto, se refleja en función de las propiedades de la superficie del objeto, así como del ángulo de la luz entrante. Esta interacción es el principal contribuyente al brillo del objeto y constituye la base de su color. [2]</p><blockquote><h1 id=ejercicio-2>Ejercicio
<a class=anchor href=#ejercicio-2>#</a></h1><p>Implemente una escena de reflexión difusa:
<iframe id=sketch style=width:550px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
            
            
            
            <script src=/VisualComputing/sketches/Lighting_3/sketch.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe></p></blockquote><details><summary>Código</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>easycam</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>models</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>itemsPlane</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambient</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambientSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>focos</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>selectPos</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;ambient.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>normal3</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>position4</span> });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>500</span>, <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noLights</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorMode</span>(<span style=color:#a6e22e>RGB</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setAttributes</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>0.250</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.150</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.500</span>, <span style=color:#ae81ff>0.700</span>],
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>state</span>, <span style=color:#ae81ff>2000</span>); 
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>oncontextmenu</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>trange</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>models</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> ,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>()),
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>focos</span> <span style=color:#f92672>=</span> {};
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span>, <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>), <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.2</span>, <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>350</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>input</span>(() =&gt; { <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>()) });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>40</span>, <span style=color:#ae81ff>80</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Centro&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Izquierda&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Derecha&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;Centro&#39;</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#e6db74>&#34;#FFFFFF&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>400</span>,<span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>color</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightColor&#34;</span>, [
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    ]);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightColor&#34;</span>, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>point</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>updatePointLight</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#39;blue&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>point</span>.<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fill</span>(<span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sphere</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;uLightPosition&#39;</span>, <span style=color:#a6e22e>treeLocation</span>(<span style=color:#a6e22e>point</span>.<span style=color:#a6e22e>position</span>, { <span style=color:#a6e22e>from</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>WORLD</span>, <span style=color:#a6e22e>to</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>EYE</span> }).<span style=color:#a6e22e>array</span>());
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>value</span>(); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>box</span>(<span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>sphere</span>(<span style=color:#a6e22e>radius</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>torus</span>(<span style=color:#a6e22e>radius</span>, <span style=color:#a6e22e>radius</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updatePointLight</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mov</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.03</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rad</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>30</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>px</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>mov</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>rad</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>py</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>mov</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>rad</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>mov</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>mov</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>PI</span> ) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.05</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pz</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Centro&#39;</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>px</span>, <span style=color:#a6e22e>py</span>, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Izquierda&#39;</span> <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>50</span>, <span style=color:#a6e22e>pz</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>70</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>pz</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>70</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Centro&#39;</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>r</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#e6db74>&#39;Izquierda&#39;</span> <span style=color:#f92672>?</span>
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>r</span>, <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>g</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>)
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Shader</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> ambient;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> uMaterialColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> lightColor;
</span></span><span style=display:flex><span><span style=color:#75715e>// uLightPosition is given in eye space</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec3</span> uLightPosition;
</span></span><span style=display:flex><span><span style=color:#75715e>// both, normal3 and position4 are given in eye space as well</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec3</span> normal3;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec4</span> position4;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec3</span> direction3 <span style=color:#f92672>=</span> uLightPosition <span style=color:#f92672>-</span> position4.xyz;
</span></span><span style=display:flex><span>  <span style=color:#75715e>// solve the diffuse light equation discarding negative values</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://thebookofshaders.com/glossary/?search=max</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// see: https://thebookofshaders.com/glossary/?search=dot</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> diffuse <span style=color:#f92672>=</span> max(<span style=color:#ae81ff>0.0</span>, dot(normalize(direction3), normalize(normal3)));
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span> (ambient <span style=color:#f92672>+</span> diffuse) <span style=color:#f92672>*</span> uMaterialColor <span style=color:#f92672>*</span> lightColor;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><blockquote><h1 id=ejercicio-3>Ejercicio
<a class=anchor href=#ejercicio-3>#</a></h1><p>Implemente una escena combinando luces de ambiente, difusa y especular. Considerar varias fuentes puntuales de luz, con factores de atenuación [5] y exponentes de Phong[6].</p></blockquote><iframe id=sketch style=width:550px;height:550px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
            
            
            
            <script src=/VisualComputing/sketches/Lighting_4/sketch.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe>
<details><summary>Código</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>easycam</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>models</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>itemsPlane</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>myShader</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambient</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>ambientSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>selectPos</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>phongExpSlider</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>attenuationRate</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lightCount</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lights</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colorPicker</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>colors</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>lightsColors</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>readShader</span>(<span style=color:#e6db74>&#39;/VisualComputing/sketches/Lighting_4/ambient.frag&#39;</span>, { <span style=color:#a6e22e>varyings</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>normal3</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>position4</span> });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>500</span>, <span style=color:#ae81ff>500</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noLights</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorMode</span>(<span style=color:#a6e22e>RGB</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>setAttributes</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>250</span>,
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>center</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>],
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#f92672>-</span><span style=color:#ae81ff>0.250</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.150</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>0.500</span>, <span style=color:#ae81ff>0.700</span>],
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state</span>;  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>easycam</span>.<span style=color:#a6e22e>setState</span>(<span style=color:#a6e22e>state</span>, <span style=color:#ae81ff>2000</span>); 
</span></span><span style=display:flex><span>  document.<span style=color:#a6e22e>oncontextmenu</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () { <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>; }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>trange</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>models</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>100</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>,
</span></span><span style=display:flex><span>        (<span style=color:#a6e22e>random</span>()<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>trange</span>
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>random</span>() <span style=color:#f92672>*</span> <span style=color:#ae81ff>30</span> ,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>()),
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span>, <span style=color:#66d9ef>int</span>(<span style=color:#a6e22e>models</span>.<span style=color:#a6e22e>length</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>3</span>), <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.2</span>, <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>350</span>, <span style=color:#ae81ff>30</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>input</span>(() =&gt; { <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>()) });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>, <span style=color:#ae81ff>80</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>option</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>option</span>(<span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>option</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>input</span>(() =&gt; { 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>count</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>:</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>() <span style=color:#f92672>===</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>?</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>:</span> <span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;lightCount&#39;</span>, <span style=color:#a6e22e>count</span>) });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colors</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lightsColors</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colors</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#e6db74>&#34;#FFFFFF&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colors</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>20</span>,<span style=color:#ae81ff>120</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>45</span>))
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>colors</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>colors</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightsColors&#34;</span>, <span style=color:#a6e22e>lightsColors</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createColorPicker</span>(<span style=color:#e6db74>&#34;#FFFFFF&#34;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>400</span>,<span style=color:#ae81ff>80</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>input</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>colorPicker</span>.<span style=color:#a6e22e>color</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;ambientColor&#34;</span>, [
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>,
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    ]);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>phongExpSlider</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1250</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>phongExpSlider</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>350</span>, <span style=color:#ae81ff>470</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>phongExpSlider</span>.<span style=color:#a6e22e>input</span>(() =&gt; { <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;phongExp&#39;</span>, <span style=color:#a6e22e>phongExpSlider</span>.<span style=color:#a6e22e>value</span>()) });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>attenuationRate</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSlider</span>(<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0.1</span>, <span style=color:#ae81ff>0.03</span>, <span style=color:#ae81ff>0.001</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>attenuationRate</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>470</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>attenuationRate</span>.<span style=color:#a6e22e>input</span>(() =&gt; { <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;attenuationRate&#39;</span>, <span style=color:#a6e22e>attenuationRate</span>.<span style=color:#a6e22e>value</span>()) });
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lights</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;ambient&#39;</span>, <span style=color:#a6e22e>ambientSlider</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;ambientColor&#34;</span>, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;phongExp&#39;</span>, <span style=color:#a6e22e>phongExpSlider</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;attenuationRate&#39;</span>, <span style=color:#a6e22e>attenuationRate</span>.<span style=color:#a6e22e>value</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;lightCount&#39;</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;lightsColors&#39;</span>, [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>point</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>updatePointLight</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>lightsColors</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>];
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>resetShader</span>();
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#39;blue&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>pop</span>(); 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>selectPos</span>.<span style=color:#a6e22e>value</span>(); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>colors</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>red</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>green</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>blue</span>(<span style=color:#a6e22e>color</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>255</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lightsColors</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>;    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>point</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>colors</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>());
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>sphere</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>lights</span>[<span style=color:#a6e22e>i</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>treeLocation</span>(<span style=color:#a6e22e>point</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>, { <span style=color:#a6e22e>from</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>WORLD</span>, <span style=color:#a6e22e>to</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>EYE</span> }).<span style=color:#a6e22e>array</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>myShader</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;uLightPosition&#39;</span>, <span style=color:#a6e22e>lights</span>.<span style=color:#a6e22e>flat</span>());  
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>myShader</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#34;lightsColors&#34;</span>, <span style=color:#a6e22e>lightsColors</span>);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#a6e22e>itemsPlane</span>.<span style=color:#a6e22e>value</span>(); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>radius</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>models</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>size</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>0</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>box</span>(<span style=color:#a6e22e>radius</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>2</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>===</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>?</span> <span style=color:#a6e22e>sphere</span>(<span style=color:#a6e22e>radius</span>) <span style=color:#f92672>:</span> <span style=color:#a6e22e>torus</span>(<span style=color:#a6e22e>radius</span>, <span style=color:#a6e22e>radius</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>updatePointLight</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mov</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.03</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>rad</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>30</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>px</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cos</span>(<span style=color:#a6e22e>mov</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>rad</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>py</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>mov</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>rad</span>;
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>mov</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>g</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>mov</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>PI</span> ) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.05</span>) <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0.5</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>pz</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>sin</span>(<span style=color:#a6e22e>frameCount</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.05</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> [{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>px</span>, <span style=color:#a6e22e>py</span>, <span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>50</span>, <span style=color:#a6e22e>pz</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>70</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>r</span>, <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>g</span>)
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>50</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>pz</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>70</span>),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>r</span>, <span style=color:#a6e22e>g</span>)
</span></span><span style=display:flex><span>  }];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>Shader</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-glsl data-lang=glsl><span style=display:flex><span><span style=color:#66d9ef>precision</span> <span style=color:#66d9ef>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> ambient;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> uMaterialColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>vec4</span> ambientColor;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> lightsColors[<span style=color:#ae81ff>12</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> phongExp;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> attenuationRate;
</span></span><span style=display:flex><span><span style=color:#75715e>// uLightPosition is given in eye space</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>int</span> lightCount;
</span></span><span style=display:flex><span><span style=color:#66d9ef>uniform</span> <span style=color:#66d9ef>float</span> uLightPosition[<span style=color:#ae81ff>12</span>];
</span></span><span style=display:flex><span><span style=color:#75715e>// both, normal3 and position4 are given in eye space as well</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec3</span> normal3;
</span></span><span style=display:flex><span><span style=color:#66d9ef>varying</span> <span style=color:#66d9ef>vec4</span> position4;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> main() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>vec4</span> sum <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(<span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>, <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; i<span style=color:#f92672>++</span>)
</span></span><span style=display:flex><span>  {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (i <span style=color:#f92672>==</span> lightCount) <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>vec3</span> direction3 <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec3</span>(uLightPosition[i<span style=color:#f92672>*</span><span style=color:#ae81ff>3</span>], uLightPosition[i<span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>], uLightPosition[i<span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span>]) <span style=color:#f92672>-</span> position4.xyz;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> d <span style=color:#f92672>=</span> length( direction3 );
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> attenuation <span style=color:#f92672>=</span>  <span style=color:#ae81ff>1.0</span> <span style=color:#f92672>/</span> (<span style=color:#ae81ff>1.0</span> <span style=color:#f92672>+</span> attenuationRate <span style=color:#f92672>*</span> d);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> diffuse <span style=color:#f92672>=</span> max(<span style=color:#ae81ff>0.0</span>, dot(normalize(direction3), normalize(normal3)));
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>float</span> specular <span style=color:#f92672>=</span> pow(max(<span style=color:#ae81ff>0.0</span>, dot(normalize(reflect(<span style=color:#f92672>-</span>direction3, normal3)), normalize(<span style=color:#f92672>-</span><span style=color:#66d9ef>vec3</span>(position4)))), phongExp);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>vec4</span> color <span style=color:#f92672>=</span> <span style=color:#66d9ef>vec4</span>(lightsColors[i<span style=color:#f92672>*</span><span style=color:#ae81ff>4</span>], lightsColors[i<span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>], lightsColors[i<span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>2</span>], lightsColors[i<span style=color:#f92672>*</span><span style=color:#ae81ff>4</span><span style=color:#f92672>+</span><span style=color:#ae81ff>3</span>]);
</span></span><span style=display:flex><span>    sum <span style=color:#f92672>+=</span> attenuation <span style=color:#f92672>*</span> (diffuse <span style=color:#f92672>+</span> specular) <span style=color:#f92672>*</span> color;
</span></span><span style=display:flex><span>  }    
</span></span><span style=display:flex><span>  gl_FragColor <span style=color:#f92672>=</span>  ((ambient <span style=color:#f92672>*</span> ambientColor) <span style=color:#f92672>+</span> sum) <span style=color:#f92672>*</span> uMaterialColor;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h2 id=referencias>Referencias
<a class=anchor href=#referencias>#</a></h2><ol><li>&ldquo;ToonShader&rdquo;, 2017 jwdunn1, P5js Editor Web</li><li>&ldquo;Computer Graphics: Shading and Lighting&rdquo;. cglearn.codelight.eu. Retrieved 2019-10-30.</li><li>&ldquo;Lighting in 3D Graphics&rdquo;. <a href=https://www.bcchang.com>www.bcchang.com</a>. Retrieved 2019-11-05.</li><li>&ldquo;Lighting and Shading&rdquo; (PDF) Pollard, Nancy (Spring 2004).</li><li>&ldquo;Light Attenuation&rdquo;. <a href=http://learnwebgl.brown37.net/09_lights/lights_attenuation.html>http://learnwebgl.brown37.net/09_lights/lights_attenuation.html</a>. Retrieved 2022-11-28.</li><li>&ldquo;Specular highlight&rdquo;. <a href=https://en.wikipedia.org/wiki/Specular_highlight#Phong_distribution>https://en.wikipedia.org/wiki/Specular_highlight#Phong_distribution</a>. Retrieved 2022-11-28.</li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/anfbalceroce/VisualComputing/commit/aa7e43422b1a64618bfe62087a8f5d895efa68fe title='Last modified by anfbalceroce | November 28, 2022' target=_blank rel=noopener><img src=/VisualComputing/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 28, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#lighting>Lighting</a><ul><li><a href=#luz-ambiental>Luz ambiental</a></li></ul></li><li><a href=#ejercicio>Ejercicio</a><ul><li><a href=#reflexion-especular>Reflexion especular</a></li></ul></li><li><a href=#ejercicio-1>Ejercicio</a><ul><li><a href=#reflexión-difusa>Reflexión difusa</a></li></ul></li><li><a href=#ejercicio-2>Ejercicio</a></li><li><a href=#ejercicio-3>Ejercicio</a><ul><li><a href=#referencias>Referencias</a></li></ul></li></ul></nav></div></aside></main></body></html>